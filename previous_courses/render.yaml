services:
  - type: web
    name: previous-courses-api
    env: python
    region: oregon  # or singapore, frankfurt 등 위치 설정 가능
    plan: free
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn main:app --host 0.0.0.0 --port 10000"
    runtime: python
    autoDeploy: true

    envVars:
      - key: GOOGLE_APPLICATION_CREDENTIALS
        value: firebase_key.json  # Render에 비밀키로 업로드 필요
      - key: CRAWLING_SERVER_URL
        value: https://crawling-server.onrender.com/crawl

    buildFilter:
      paths:
        - main.py
        - router/
        - firebase/
        - utils/
        - requirements.txt
        - render.yaml
